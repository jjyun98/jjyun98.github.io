---
layout: single
title:  "Mutate"
categories:
    - R Syntax
tags: 
    - R
toc: true
toc_sticky: true
use_math: true
---

<head>
  <style>
    table.dataframe {
      white-space: normal;
      width: 100%;
      height: 240px;
      display: block;
      overflow: auto;
      font-family: Arial, sans-serif;
      font-size: 0.9rem;
      line-height: 20px;
      text-align: center;
      border: 0px !important;
    }

    table.dataframe th {
      text-align: center;
      font-weight: bold;
      padding: 8px;
    }

    table.dataframe td {
      text-align: center;
      padding: 8px;
    }

    table.dataframe tr:hover {
      background: #b8d1f3; 
    }

    .output_prompt {
      overflow: auto;
      font-size: 0.9rem;
      line-height: 1.45;
      border-radius: 0.3rem;
      -webkit-overflow-scrolling: touch;
      padding: 0.8rem;
      margin-top: 0;
      margin-bottom: 15px;
      font: 1rem Consolas, "Liberation Mono", Menlo, Courier, monospace;
      color: $code-text-color;
      border: solid 1px $border-color;
      border-radius: 0.3rem;
      word-break: normal;
      white-space: pre;
    }

  .dataframe tbody tr th:only-of-type {
      vertical-align: middle;
  }

  .dataframe tbody tr th {
      vertical-align: top;
  }

  .dataframe thead th {
      text-align: center !important;
      padding: 8px;
  }

  .page__content p {
      margin: 0 0 0px !important;
  }

  .page__content p > strong {
    font-size: 0.8rem !important;
  }

  </style>
</head>


# mutate



mutate(filter, count, select, left_join, match), join



```R
library('tidyverse')
library('nycflights13')
```

## mutate


### count, filter


- í…Œì´ë¸”ì—ì„œ ê¸°ë³¸í‚¤ë¥¼ í™•ì¸í•œ í›„ ì‹¤ì œë¡œ ê¸°ë³¸í‚¤ê°€ ê° ê´€ì¸¡ê°’ì„ ê³ ìœ í•˜ê²Œ ì‹ë³„í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ `count`í•˜ê³  `n`ì´ 1ë³´ë‹¤ í° í•­ëª©ì„ ì°¾ëŠ”ë‹¤.



```R
weather %>%
count(year, month, day, hour, origin) %>%
filter(n > 1)
```

<table class="dataframe">
<caption>A tibble: 3 Ã— 6</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>hour</th><th scope=col>origin</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>11</td><td>3</td><td>1</td><td>EWR</td><td>2</td></tr>
	<tr><td>2013</td><td>11</td><td>3</td><td>1</td><td>JFK</td><td>2</td></tr>
	<tr><td>2013</td><td>11</td><td>3</td><td>1</td><td>LGA</td><td>2</td></tr>
</tbody>
</table>



```R
flights %>%
count(year, month, day, flight) %>%
filter(n > 1) %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 5</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>flight</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td> 1</td><td>2</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td> 3</td><td>2</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td> 4</td><td>2</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>11</td><td>3</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>15</td><td>2</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>21</td><td>2</td></tr>
</tbody>
</table>


### select



```R
flights2 <- flights %>%
select(year:day, hour, origin, dest, tailnum, carrier)
flights2 %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 8</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>hour</th><th scope=col>origin</th><th scope=col>dest</th><th scope=col>tailnum</th><th scope=col>carrier</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>EWR</td><td>IAH</td><td>N14228</td><td>UA</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>LGA</td><td>IAH</td><td>N24211</td><td>UA</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>JFK</td><td>MIA</td><td>N619AA</td><td>AA</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>JFK</td><td>BQN</td><td>N804JB</td><td>B6</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>6</td><td>LGA</td><td>ATL</td><td>N668DN</td><td>DL</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>EWR</td><td>ORD</td><td>N39463</td><td>UA</td></tr>
</tbody>
</table>


### left_join



```R
flights2 %>%
select(-origin, -dest) %>%
left_join(airlines, by = "carrier") %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 7</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>hour</th><th scope=col>tailnum</th><th scope=col>carrier</th><th scope=col>name</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N14228</td><td>UA</td><td>United Air Lines Inc. </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N24211</td><td>UA</td><td>United Air Lines Inc. </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N619AA</td><td>AA</td><td>American Airlines Inc.</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N804JB</td><td>B6</td><td>JetBlue Airways       </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>6</td><td>N668DN</td><td>DL</td><td>Delta Air Lines Inc.  </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N39463</td><td>UA</td><td>United Air Lines Inc. </td></tr>
</tbody>
</table>



```R
flights2 %>%
select(-origin, -dest) %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 6</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>hour</th><th scope=col>tailnum</th><th scope=col>carrier</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N14228</td><td>UA</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N24211</td><td>UA</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N619AA</td><td>AA</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N804JB</td><td>B6</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>6</td><td>N668DN</td><td>DL</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N39463</td><td>UA</td></tr>
</tbody>
</table>



```R
airlines %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 2</caption>
<thead>
	<tr><th scope=col>carrier</th><th scope=col>name</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>9E</td><td>Endeavor Air Inc.       </td></tr>
	<tr><td>AA</td><td>American Airlines Inc.  </td></tr>
	<tr><td>AS</td><td>Alaska Airlines Inc.    </td></tr>
	<tr><td>B6</td><td>JetBlue Airways         </td></tr>
	<tr><td>DL</td><td>Delta Air Lines Inc.    </td></tr>
	<tr><td>EV</td><td>ExpressJet Airlines Inc.</td></tr>
</tbody>
</table>


`match` : ë§ ê·¸ëŒ€ë¡œ ë‹¤ë¥¸ ë°ì´í„°ì˜ ì—´ì˜ í•­ëª©ê³¼ ì´ ì—´ì˜ í•´ë‹¹ í•­ëª©ì— ë§ëŠ” ê²ƒì„ ë§¤ì¹˜í•´ì¤€ë‹¤.


### match



```R
flights2 %>%
select(-origin, -dest) %>%
mutate(name = airlines$name[match(carrier, airlines$carrier)]) %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 7</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>hour</th><th scope=col>tailnum</th><th scope=col>carrier</th><th scope=col>name</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N14228</td><td>UA</td><td>United Air Lines Inc. </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N24211</td><td>UA</td><td>United Air Lines Inc. </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N619AA</td><td>AA</td><td>American Airlines Inc.</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N804JB</td><td>B6</td><td>JetBlue Airways       </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>6</td><td>N668DN</td><td>DL</td><td>Delta Air Lines Inc.  </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>N39463</td><td>UA</td><td>United Air Lines Inc. </td></tr>
</tbody>
</table>


## join


`-` ì˜ˆì‹œ ì¶”ê°€



```R
x <- tribble(
    ~key, ~val_x,
    1, "x1",
    2, "x2",
    3, "x3"
    )
y <- tribble(
    ~key, ~val_y,
    1, "y1",
    2, "y2",
    4, "y3"
    )
```


```R
x
y
```

<table class="dataframe">
<caption>A tibble: 3 Ã— 2</caption>
<thead>
	<tr><th scope=col>key</th><th scope=col>val_x</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>x1</td></tr>
	<tr><td>2</td><td>x2</td></tr>
	<tr><td>3</td><td>x3</td></tr>
</tbody>
</table>


<table class="dataframe">
<caption>A tibble: 3 Ã— 2</caption>
<thead>
	<tr><th scope=col>key</th><th scope=col>val_y</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>y1</td></tr>
	<tr><td>2</td><td>y2</td></tr>
	<tr><td>4</td><td>y3</td></tr>
</tbody>
</table>



```R
x %>% inner_join(y, by = "key")
```

<table class="dataframe">
<caption>A tibble: 2 Ã— 3</caption>
<thead>
	<tr><th scope=col>key</th><th scope=col>val_x</th><th scope=col>val_y</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>x1</td><td>y1</td></tr>
	<tr><td>2</td><td>x2</td><td>y2</td></tr>
</tbody>
</table>


> ì¡°ì¸ ì¢…ë¥˜


### ì´ë¯¸ì§€ ì‚½ì… ì˜ˆì •


### ì¤‘ë³µí‚¤


- í‚¤ê°€ ê³ ìœ í•˜ì§€ ì•Šê³  ì¤‘ë³µì¼ ê²½ìš°?



```R
x <- tribble(
    ~key, ~val_x,
    1, "x1",
    2, "x2",
    2, "x3",
    1, "x4"
    )
y <- tribble(
    ~key, ~val_y,
    1, "y1",
    2, "y2"
    )
left_join(x, y, by = "key")
```

<table class="dataframe">
<caption>A tibble: 4 Ã— 3</caption>
<thead>
	<tr><th scope=col>key</th><th scope=col>val_x</th><th scope=col>val_y</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>x1</td><td>y1</td></tr>
	<tr><td>2</td><td>x2</td><td>y2</td></tr>
	<tr><td>2</td><td>x3</td><td>y2</td></tr>
	<tr><td>1</td><td>x4</td><td>y1</td></tr>
</tbody>
</table>


- ì¼ë°˜ì ìœ¼ë¡œ í…Œì´ë¸” ìŒì—ì„œ ì¡°ì¸í•˜ë ¤ëŠ” ë³€ìˆ˜ëŠ” ë‘ í…Œì´ë¸”ì—ì„œ í•­ìƒ í•˜ë‚˜ì˜ ë³€ìˆ˜(ê°™ì€ ì´ë¦„)ì— ì˜í•´ ì¡°ì¸ë˜ì—ˆë‹¤.<br>

`by = "key"`ì— ì˜í•´<br>

í•˜ì§€ë§Œ, `by = NULL`ë¥¼ ì‚¬ìš©í•˜ë©´ ë‘ í…Œì´ë¸”ì— ìˆëŠ” ëª¨ë“  ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°ì¸í•œë‹¤.<br>

ì´ë¥¼ nature joinì´ë¼ ë¶€ë¦„.



```R
flights2 %>%
left_join(weather) %>% head
```

<pre>
[1m[22mJoining, by = c("year", "month", "day", "hour", "origin")
</pre>
<table class="dataframe">
<caption>A tibble: 6 Ã— 18</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>hour</th><th scope=col>origin</th><th scope=col>dest</th><th scope=col>tailnum</th><th scope=col>carrier</th><th scope=col>temp</th><th scope=col>dewp</th><th scope=col>humid</th><th scope=col>wind_dir</th><th scope=col>wind_speed</th><th scope=col>wind_gust</th><th scope=col>precip</th><th scope=col>pressure</th><th scope=col>visib</th><th scope=col>time_hour</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dttm&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>EWR</td><td>IAH</td><td>N14228</td><td>UA</td><td>39.02</td><td>28.04</td><td>64.43</td><td>260</td><td>12.65858</td><td>      NA</td><td>0</td><td>1011.9</td><td>10</td><td>2013-01-01 05:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>LGA</td><td>IAH</td><td>N24211</td><td>UA</td><td>39.92</td><td>24.98</td><td>54.81</td><td>250</td><td>14.96014</td><td>21.86482</td><td>0</td><td>1011.4</td><td>10</td><td>2013-01-01 05:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>JFK</td><td>MIA</td><td>N619AA</td><td>AA</td><td>39.02</td><td>26.96</td><td>61.63</td><td>260</td><td>14.96014</td><td>      NA</td><td>0</td><td>1012.1</td><td>10</td><td>2013-01-01 05:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>JFK</td><td>BQN</td><td>N804JB</td><td>B6</td><td>39.02</td><td>26.96</td><td>61.63</td><td>260</td><td>14.96014</td><td>      NA</td><td>0</td><td>1012.1</td><td>10</td><td>2013-01-01 05:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>6</td><td>LGA</td><td>ATL</td><td>N668DN</td><td>DL</td><td>39.92</td><td>24.98</td><td>54.81</td><td>260</td><td>16.11092</td><td>23.01560</td><td>0</td><td>1011.7</td><td>10</td><td>2013-01-01 06:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>EWR</td><td>ORD</td><td>N39463</td><td>UA</td><td>39.02</td><td>28.04</td><td>64.43</td><td>260</td><td>12.65858</td><td>      NA</td><td>0</td><td>1011.9</td><td>10</td><td>2013-01-01 05:00:00</td></tr>
</tbody>
</table>


`union` : í•©ì§‘í•© í•¨ìˆ˜



```R
union(colnames(flights2),colnames(weather))
```

<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'year'</li><li>'month'</li><li>'day'</li><li>'hour'</li><li>'origin'</li><li>'dest'</li><li>'tailnum'</li><li>'carrier'</li><li>'temp'</li><li>'dewp'</li><li>'humid'</li><li>'wind_dir'</li><li>'wind_speed'</li><li>'wind_gust'</li><li>'precip'</li><li>'pressure'</li><li>'visib'</li><li>'time_hour'</li></ol>


- ê²°ë¡  : ê³µí†µëœ ëª¨ë“  ë³€ìˆ˜ë¡œ ì¡°ì¸


`-` ì›ë˜ í•˜ë˜ ê²ƒì²˜ëŸ¼ íŠ¹ì • ë³€ìˆ˜ë¡œ ì¡°ì¸



```R
flights2 %>%
left_join(planes, by = "tailnum") %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 16</caption>
<thead>
	<tr><th scope=col>year.x</th><th scope=col>month</th><th scope=col>day</th><th scope=col>hour</th><th scope=col>origin</th><th scope=col>dest</th><th scope=col>tailnum</th><th scope=col>carrier</th><th scope=col>year.y</th><th scope=col>type</th><th scope=col>manufacturer</th><th scope=col>model</th><th scope=col>engines</th><th scope=col>seats</th><th scope=col>speed</th><th scope=col>engine</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>EWR</td><td>IAH</td><td>N14228</td><td>UA</td><td>1999</td><td>Fixed wing multi engine</td><td>BOEING</td><td>737-824  </td><td>2</td><td>149</td><td>NA</td><td>Turbo-fan</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>LGA</td><td>IAH</td><td>N24211</td><td>UA</td><td>1998</td><td>Fixed wing multi engine</td><td>BOEING</td><td>737-824  </td><td>2</td><td>149</td><td>NA</td><td>Turbo-fan</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>JFK</td><td>MIA</td><td>N619AA</td><td>AA</td><td>1990</td><td>Fixed wing multi engine</td><td>BOEING</td><td>757-223  </td><td>2</td><td>178</td><td>NA</td><td>Turbo-fan</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>JFK</td><td>BQN</td><td>N804JB</td><td>B6</td><td>2012</td><td>Fixed wing multi engine</td><td>AIRBUS</td><td>A320-232 </td><td>2</td><td>200</td><td>NA</td><td>Turbo-fan</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>6</td><td>LGA</td><td>ATL</td><td>N668DN</td><td>DL</td><td>1991</td><td>Fixed wing multi engine</td><td>BOEING</td><td>757-232  </td><td>2</td><td>178</td><td>NA</td><td>Turbo-fan</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>EWR</td><td>ORD</td><td>N39463</td><td>UA</td><td>2012</td><td>Fixed wing multi engine</td><td>BOEING</td><td>737-924ER</td><td>2</td><td>191</td><td>NA</td><td>Turbo-fan</td></tr>
</tbody>
</table>


- ì•„ë˜ëŠ” ê° í…Œì´ë¸”ì—ì„œ ë‹¤ë¥¸ ì´ë¦„ì˜ ë³€ìˆ˜ì´ì§€ë§Œ í•˜ë‚˜ë¡œ í†µí•©í•´ì„œ ì¡°ì¸í•˜ê³ ì í•˜ëŠ” ê²½ìš°<br>

ì¡°ì¸í›„ì—ëŠ” ì²« ë²ˆì§¸ ë³€ìˆ˜ì˜ ì´ë¦„ìœ¼ë¡œ ì¶œë ¥ëœë‹¤.<br>

ì—¬ê¸°ì„œëŠ” destë¡œ í†µí•©



```R
flights2 %>%
left_join(airports, c("dest" = "faa")) %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 15</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>hour</th><th scope=col>origin</th><th scope=col>dest</th><th scope=col>tailnum</th><th scope=col>carrier</th><th scope=col>name</th><th scope=col>lat</th><th scope=col>lon</th><th scope=col>alt</th><th scope=col>tz</th><th scope=col>dst</th><th scope=col>tzone</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>EWR</td><td>IAH</td><td>N14228</td><td>UA</td><td>George Bush Intercontinental   </td><td>29.98443</td><td>-95.34144</td><td>  97</td><td>-6</td><td>A </td><td>America/Chicago </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>LGA</td><td>IAH</td><td>N24211</td><td>UA</td><td>George Bush Intercontinental   </td><td>29.98443</td><td>-95.34144</td><td>  97</td><td>-6</td><td>A </td><td>America/Chicago </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>JFK</td><td>MIA</td><td>N619AA</td><td>AA</td><td>Miami Intl                     </td><td>25.79325</td><td>-80.29056</td><td>   8</td><td>-5</td><td>A </td><td>America/New_York</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>JFK</td><td>BQN</td><td>N804JB</td><td>B6</td><td>NA                             </td><td>      NA</td><td>       NA</td><td>  NA</td><td>NA</td><td>NA</td><td>NA              </td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>6</td><td>LGA</td><td>ATL</td><td>N668DN</td><td>DL</td><td>Hartsfield Jackson Atlanta Intl</td><td>33.63672</td><td>-84.42807</td><td>1026</td><td>-5</td><td>A </td><td>America/New_York</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>5</td><td>EWR</td><td>ORD</td><td>N39463</td><td>UA</td><td>Chicago Ohare Intl             </td><td>41.97860</td><td>-87.90484</td><td> 668</td><td>-6</td><td>A </td><td>America/Chicago </td></tr>
</tbody>
</table>


### filter join



```R
top_dest <- flights %>%
count(dest, sort = TRUE) %>%
head(10)
top_dest
```

<table class="dataframe">
<caption>A tibble: 10 Ã— 2</caption>
<thead>
	<tr><th scope=col>dest</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>ORD</td><td>17283</td></tr>
	<tr><td>ATL</td><td>17215</td></tr>
	<tr><td>LAX</td><td>16174</td></tr>
	<tr><td>BOS</td><td>15508</td></tr>
	<tr><td>MCO</td><td>14082</td></tr>
	<tr><td>CLT</td><td>14064</td></tr>
	<tr><td>SFO</td><td>13331</td></tr>
	<tr><td>FLL</td><td>12055</td></tr>
	<tr><td>MIA</td><td>11728</td></tr>
	<tr><td>DCA</td><td> 9705</td></tr>
</tbody>
</table>



```R
flights %>%
filter(dest %in% top_dest$dest) %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 19</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>dep_time</th><th scope=col>sched_dep_time</th><th scope=col>dep_delay</th><th scope=col>arr_time</th><th scope=col>sched_arr_time</th><th scope=col>arr_delay</th><th scope=col>carrier</th><th scope=col>flight</th><th scope=col>tailnum</th><th scope=col>origin</th><th scope=col>dest</th><th scope=col>air_time</th><th scope=col>distance</th><th scope=col>hour</th><th scope=col>minute</th><th scope=col>time_hour</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dttm&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td>542</td><td>540</td><td> 2</td><td>923</td><td>850</td><td> 33</td><td>AA</td><td>1141</td><td>N619AA</td><td>JFK</td><td>MIA</td><td>160</td><td>1089</td><td>5</td><td>40</td><td>2013-01-01 05:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>554</td><td>600</td><td>-6</td><td>812</td><td>837</td><td>-25</td><td>DL</td><td> 461</td><td>N668DN</td><td>LGA</td><td>ATL</td><td>116</td><td> 762</td><td>6</td><td> 0</td><td>2013-01-01 06:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>554</td><td>558</td><td>-4</td><td>740</td><td>728</td><td> 12</td><td>UA</td><td>1696</td><td>N39463</td><td>EWR</td><td>ORD</td><td>150</td><td> 719</td><td>5</td><td>58</td><td>2013-01-01 05:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>555</td><td>600</td><td>-5</td><td>913</td><td>854</td><td> 19</td><td>B6</td><td> 507</td><td>N516JB</td><td>EWR</td><td>FLL</td><td>158</td><td>1065</td><td>6</td><td> 0</td><td>2013-01-01 06:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>557</td><td>600</td><td>-3</td><td>838</td><td>846</td><td> -8</td><td>B6</td><td>  79</td><td>N593JB</td><td>JFK</td><td>MCO</td><td>140</td><td> 944</td><td>6</td><td> 0</td><td>2013-01-01 06:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>558</td><td>600</td><td>-2</td><td>753</td><td>745</td><td>  8</td><td>AA</td><td> 301</td><td>N3ALAA</td><td>LGA</td><td>ORD</td><td>138</td><td> 733</td><td>6</td><td> 0</td><td>2013-01-01 06:00:00</td></tr>
</tbody>
</table>


ìœ„ì—ì„œ ë½‘ì€ ìƒìœ„ 10ê°œì˜ destì— í•´ë‹¹í•˜ëŠ” ì—´ë§Œ filtering


`semi_join` : ë§¤ì¹­ì—ë§Œ ê´€ì‹¬, ì¡°ê±´ì— í•´ë‹¹í•˜ëŠ” í•­ëª©ì„ ë§¤ì¹­í•´ì¤€ë‹¤.<br>

`anti_join` : yì™€ ë§¤ì¹˜ë˜ëŠ” xì˜ ëª¨ë“  ê´€ì¸¡ê°’ì„ ì‚­ì œí•œë‹¤.<br>

ì¦‰, ë¶ˆì¼ì¹˜ í–‰ë§Œ ëª¨ì•„ì¤€ë‹¤.<br> ì—¬ê¸°ì„œëŠ” ë§¤ì¹˜ë˜ì§€ ì•ŠëŠ” í•­ê³µí¸ì´ ë§ì€ì§€ ê¶ê¸ˆí•  ë•Œ ì‚¬ìš©



```R
flights %>%
semi_join(top_dest) %>% head
```

<pre>
[1m[22mJoining, by = "dest"
</pre>
<table class="dataframe">
<caption>A tibble: 6 Ã— 19</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>month</th><th scope=col>day</th><th scope=col>dep_time</th><th scope=col>sched_dep_time</th><th scope=col>dep_delay</th><th scope=col>arr_time</th><th scope=col>sched_arr_time</th><th scope=col>arr_delay</th><th scope=col>carrier</th><th scope=col>flight</th><th scope=col>tailnum</th><th scope=col>origin</th><th scope=col>dest</th><th scope=col>air_time</th><th scope=col>distance</th><th scope=col>hour</th><th scope=col>minute</th><th scope=col>time_hour</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dttm&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2013</td><td>1</td><td>1</td><td>542</td><td>540</td><td> 2</td><td>923</td><td>850</td><td> 33</td><td>AA</td><td>1141</td><td>N619AA</td><td>JFK</td><td>MIA</td><td>160</td><td>1089</td><td>5</td><td>40</td><td>2013-01-01 05:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>554</td><td>600</td><td>-6</td><td>812</td><td>837</td><td>-25</td><td>DL</td><td> 461</td><td>N668DN</td><td>LGA</td><td>ATL</td><td>116</td><td> 762</td><td>6</td><td> 0</td><td>2013-01-01 06:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>554</td><td>558</td><td>-4</td><td>740</td><td>728</td><td> 12</td><td>UA</td><td>1696</td><td>N39463</td><td>EWR</td><td>ORD</td><td>150</td><td> 719</td><td>5</td><td>58</td><td>2013-01-01 05:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>555</td><td>600</td><td>-5</td><td>913</td><td>854</td><td> 19</td><td>B6</td><td> 507</td><td>N516JB</td><td>EWR</td><td>FLL</td><td>158</td><td>1065</td><td>6</td><td> 0</td><td>2013-01-01 06:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>557</td><td>600</td><td>-3</td><td>838</td><td>846</td><td> -8</td><td>B6</td><td>  79</td><td>N593JB</td><td>JFK</td><td>MCO</td><td>140</td><td> 944</td><td>6</td><td> 0</td><td>2013-01-01 06:00:00</td></tr>
	<tr><td>2013</td><td>1</td><td>1</td><td>558</td><td>600</td><td>-2</td><td>753</td><td>745</td><td>  8</td><td>AA</td><td> 301</td><td>N3ALAA</td><td>LGA</td><td>ORD</td><td>138</td><td> 733</td><td>6</td><td> 0</td><td>2013-01-01 06:00:00</td></tr>
</tbody>
</table>


ê²°ê³¼ì ìœ¼ë¡œ ìœ„ì˜ `filter`ì™€ ê°™ì€ ê²°ê³¼ ë‚˜ì˜´



```R
flights %>%
anti_join(planes, by = "tailnum") %>%
count(tailnum, sort = TRUE) %>% head
```

<table class="dataframe">
<caption>A tibble: 6 Ã— 2</caption>
<thead>
	<tr><th scope=col>tailnum</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>NA    </td><td>2512</td></tr>
	<tr><td>N725MQ</td><td> 575</td></tr>
	<tr><td>N722MQ</td><td> 513</td></tr>
	<tr><td>N723MQ</td><td> 507</td></tr>
	<tr><td>N713MQ</td><td> 483</td></tr>
	<tr><td>N735MQ</td><td> 396</td></tr>
</tbody>
</table>


### ì§‘í•© ì—°ì‚°


> `intersect(x,y)` : êµì§‘í•©  

`union(x,y)` : í•©ì§‘í•©  

`set_diff(x,y)` : xì—ëŠ” ìˆì§€ë§Œ, yì—ëŠ” ì—†ëŠ” ê´€ì¸¡ê°’ ë°˜í™˜  


