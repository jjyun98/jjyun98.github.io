---
author: Jo YunHo
pubDatetime: 2022-09-12T10:00:00Z
modDatetime: 2025-01-17T15:00:00Z
title: R ëª¨ë¸ë§ ì‹¤ì „í¸ - ë‹¤ì´ì•„ëª¬ë“œ ê°€ê²©ê³¼ í•­ê³µí¸ ìš´í•­ ë¶„ì„ (12)
slug: "r-modeling-diamond-flight-analysis"
featured: true
draft: false
tags:
  - R
  - Modeling
  - Data Analysis
  - Regression Analysis
  - Time Series
  - Diamond Analysis
  - Flight Analysis
  - modelr
description: "Rì˜ ì‹¤ì œ ë°ì´í„°ë¥¼ í™œìš©í•œ ëª¨ë¸ë§ ì‹¤ì „ ì˜ˆì œ. ë‹¤ì´ì•„ëª¬ë“œ ê°€ê²© ì˜ˆì¸¡ê³¼ í•­ê³µí¸ ìš´í•­ íŒ¨í„´ ë¶„ì„ì„ í†µí•´ ì‹¤ë¬´ ëª¨ë¸ë§ ì›Œí¬í”Œë¡œìš°ë¥¼ ì²´ê³„ì ìœ¼ë¡œ í•™ìŠµí•©ë‹ˆë‹¤."
---

> ğŸ“Œ ì°¸ê³  ìë£Œ:  
> [modelr ê³µì‹ ë¬¸ì„œ](https://modelr.tidyverse.org/) | [R for Data Science - Model Building](https://r4ds.had.co.nz/model-building.html)

## Table of contents

## ê°œìš”

**ì‹¤ë¬´ ëª¨ë¸ë§**ì€ ì´ë¡ ì  ì§€ì‹ì„ ì‹¤ì œ ë°ì´í„°ì— ì ìš©í•˜ì—¬ ì˜ë¯¸ ìˆëŠ” ì¸ì‚¬ì´íŠ¸ë¥¼ ì¶”ì¶œí•˜ëŠ” ê³¼ì •ì…ë‹ˆë‹¤. ë‹¨ìˆœí•œ íŒ¨í„´ ì°¾ê¸°ë¥¼ ë„˜ì–´ì„œ ë„ë©”ì¸ ì§€ì‹ê³¼ í†µê³„ì  ê¸°ë²•ì„ ê²°í•©í•˜ì—¬ í˜„ì‹¤ ì„¸ê³„ì˜ ë³µì¡í•œ í˜„ìƒì„ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤.

ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” **ë‹¤ì´ì•„ëª¬ë“œ ê°€ê²© ì˜ˆì¸¡**ê³¼ **í•­ê³µí¸ ìš´í•­ íŒ¨í„´ ë¶„ì„**ì´ë¼ëŠ” ë‘ ê°€ì§€ ì‹¤ì „ ì˜ˆì œë¥¼ í†µí•´ ì²´ê³„ì ì¸ ëª¨ë¸ë§ ì›Œí¬í”Œë¡œìš°ì™€ ì‹¤ë¬´ì—ì„œ ìì£¼ ë§ˆì£¼ì¹˜ëŠ” ë¬¸ì œë“¤ì„ í•´ê²°í•˜ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤!

## 1. í™˜ê²½ ì„¤ì • ë° ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ

### í•„ìˆ˜ íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë° ë¡œë“œ

```r
# íŒ¨í‚¤ì§€ ë¡œë“œ
library('tidyverse')      # ë°ì´í„° ì¡°ì‘ê³¼ ì‹œê°í™”
library('modelr')         # ëª¨ë¸ë§ ë„êµ¬
library('nycflights13')   # í•­ê³µí¸ ë°ì´í„°
library('lubridate')      # ë‚ ì§œ ì²˜ë¦¬
library('splines')        # ìŠ¤í”Œë¼ì¸ í•¨ìˆ˜

# í”Œë¡¯ ìµœì í™” ì„¤ì •
options(
  repr.plot.width = 8,
  repr.plot.height = 5,
  repr.plot.res = 150
)

# í…Œë§ˆ ì„¤ì •
theme_set(theme_minimal(base_size = 10))
```

## 2. ì˜ˆì œ 1: ë‹¤ì´ì•„ëª¬ë“œ ê°€ê²© ì˜ˆì¸¡ ëª¨ë¸

### ì—­ì„¤ì  í˜„ìƒ ë°œê²¬

**"ë‚®ì€ í’ˆì§ˆì˜ ë‹¤ì´ì•„ëª¬ë“œê°€ ë” ë¹„ì‹¼ ì´ìœ ëŠ” ë¬´ì—‡ì¸ê°€?"**

```r
# í’ˆì§ˆë³„ ê°€ê²© ë¶„í¬ í™•ì¸
ggplot(diamonds, aes(cut, price)) + geom_boxplot()
ggplot(diamonds, aes(color, price)) + geom_boxplot()  
ggplot(diamonds, aes(clarity, price)) + geom_boxplot()
```

![cut vs price](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_6_0.png)

![color vs price](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_6_1.png)

![clarity vs price](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_6_2.png)

#### ğŸ¤” ë†€ë¼ìš´ ë°œê²¬
í’ˆì§ˆì´ ë–¨ì–´ì§€ëŠ” ë‹¤ì´ì•„ëª¬ë“œ(Fair cut, J color, I1 clarity)ê°€ í‰ê· ì ìœ¼ë¡œ ë” ë†’ì€ ê°€ê²©ì„ ë³´ì…ë‹ˆë‹¤. ì´ëŠ” ì§ê´€ê³¼ ë°˜ëŒ€ë˜ëŠ” í˜„ìƒì…ë‹ˆë‹¤!

### í˜¼ì¬ë³€ìˆ˜(Confounding Variable) ë°œê²¬

```r
# ìºëŸ¿ê³¼ ê°€ê²©ì˜ ê´€ê³„ í™•ì¸
ggplot(diamonds, aes(carat, price)) +
  geom_hex(bins = 50)
```

![carat vs price](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_8_0.png)

#### ğŸ’¡ í•µì‹¬ ì¸ì‚¬ì´íŠ¸
**ìºëŸ¿(ë¬´ê²Œ)ì´ ìˆ¨ê²¨ì§„ í˜¼ì¬ë³€ìˆ˜**ì…ë‹ˆë‹¤. í’ˆì§ˆì´ ë‚®ì€ ë‹¤ì´ì•„ëª¬ë“œëŠ” ì¼ë°˜ì ìœ¼ë¡œ ë” ë¬´ê²ê³ , ë¬´ê²Œê°€ ê°€ê²©ì— ë¯¸ì¹˜ëŠ” ì˜í–¥ì´ í’ˆì§ˆë³´ë‹¤ í¬ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

### ë°ì´í„° ì „ì²˜ë¦¬ì™€ ë³€í™˜

```r
# ë°ì´í„° ì •ì œ ë° ë¡œê·¸ ë³€í™˜
diamonds2 <- diamonds %>%
  filter(carat <= 2.5) %>%    # ìƒìœ„ 99.7% ë°ì´í„°ë§Œ ì‚¬ìš©
  mutate(
    lprice = log2(price),      # ê°€ê²© ë¡œê·¸ ë³€í™˜
    lcarat = log2(carat)       # ìºëŸ¿ ë¡œê·¸ ë³€í™˜
  )

# ë¡œê·¸ ë³€í™˜ í›„ ê´€ê³„ í™•ì¸
ggplot(diamonds2, aes(lcarat, lprice)) +
  geom_hex(bins = 30)
```

![log transformed relationship](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_13_0.png)

#### âœ… ë¡œê·¸ ë³€í™˜ì˜ íš¨ê³¼
- **ì„ í˜•ì„± ê°œì„ **: ë³µì¡í•œ ê³¡ì„  ê´€ê³„ê°€ ì„ í˜•ìœ¼ë¡œ ë³€í™˜
- **í•´ì„ ìš©ì´ì„±**: ë¡œê·¸ ì°¨ì´ëŠ” ë¹„ìœ¨ ë³€í™”ë¥¼ ì˜ë¯¸
- **ë“±ë¶„ì‚°ì„±**: ì”ì°¨ì˜ ë¶„ì‚°ì´ ë” ê· ë“±í•´ì§

### ìºëŸ¿ íš¨ê³¼ ì œê±° ëª¨ë¸ë§

```r
# 1ë‹¨ê³„: ìºëŸ¿ë§Œ ì‚¬ìš©í•œ ê¸°ë³¸ ëª¨ë¸
mod_diamond <- lm(lprice ~ lcarat, data = diamonds2)

# ì˜ˆì¸¡ì„  ì‹œê°í™”
grid <- diamonds2 %>%
  data_grid(carat = seq_range(carat, 20)) %>%
  mutate(lcarat = log2(carat)) %>%
  add_predictions(mod_diamond, "lprice") %>%
  mutate(price = 2^lprice)

ggplot(diamonds2, aes(carat, price)) +
  geom_hex(bins = 50) +
  geom_line(data = grid, color = "red", size = 1)
```

![carat model prediction](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_16_1.png)

### ì”ì°¨ ë¶„ì„ì„ í†µí•œ í’ˆì§ˆ íš¨ê³¼ í™•ì¸

```r
# ì”ì°¨ ê³„ì‚° ë° ì‹œê°í™”
diamonds2 <- diamonds2 %>%
  add_residuals(mod_diamond, "lresid")

# ìºëŸ¿ íš¨ê³¼ ì œê±° í›„ í’ˆì§ˆë³„ ë¶„ì„
ggplot(diamonds2, aes(cut, lresid)) + geom_boxplot()
ggplot(diamonds2, aes(color, lresid)) + geom_boxplot()
ggplot(diamonds2, aes(clarity, lresid)) + geom_boxplot()
```

![residual analysis cut](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_20_0.png)

![residual analysis color](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_20_1.png)

![residual analysis clarity](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_20_2.png)

#### ğŸ¯ ë¬¸ì œ í•´ê²°!
**ìºëŸ¿ íš¨ê³¼ë¥¼ ì œê±°í•œ í›„ì—ëŠ” ì˜ˆìƒëŒ€ë¡œ í’ˆì§ˆì´ ì¢‹ì„ìˆ˜ë¡ ë†’ì€ ê°€ê²©**ì„ ë³´ì…ë‹ˆë‹¤. ì´ˆê¸° ì—­ì„¤ì€ í˜¼ì¬ë³€ìˆ˜ ë•Œë¬¸ì´ì—ˆìŠµë‹ˆë‹¤.

### í†µí•© ëª¨ë¸ êµ¬ì¶•

```r
# ëª¨ë“  í’ˆì§ˆ ë³€ìˆ˜ë¥¼ í¬í•¨í•œ ì¢…í•© ëª¨ë¸
mod_diamond2 <- lm(
  lprice ~ lcarat + color + cut + clarity,
  data = diamonds2
)

# ëª¨ë¸ ì˜ˆì¸¡ê°’ ìƒì„± (ëŒ€í‘œê°’ ì‚¬ìš©)
grid <- diamonds2 %>%
  data_grid(cut, .model = mod_diamond2) %>%
  add_predictions(mod_diamond2)

ggplot(grid, aes(cut, pred)) +
  geom_point()
```

![comprehensive model predictions](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_27_0.png)

### ì´ìƒê°’ íƒì§€ ë° ë¶„ì„

```r
# í° ì”ì°¨ë¥¼ ê°€ì§„ ë‹¤ì´ì•„ëª¬ë“œ ì°¾ê¸°
diamonds2 <- diamonds2 %>%
  add_residuals(mod_diamond2, "lresid2")

# ì´ìƒê°’ í™•ì¸
diamonds2 %>%
  filter(abs(lresid2) > 1) %>%
  add_predictions(mod_diamond2) %>%
  mutate(pred = round(2^pred)) %>%
  select(price, pred, carat:table, x:z) %>%
  arrange(price)
```

#### ğŸ“Š ì”ì°¨ í•´ì„
- **ì”ì°¨ -1**: ì˜ˆì¸¡ ê°€ê²©ì˜ ì ˆë°˜ (2^(-1) = 0.5)
- **ì”ì°¨ +1**: ì˜ˆì¸¡ ê°€ê²©ì˜ ë‘ ë°° (2^1 = 2.0)
- **ì´ìƒê°’**: ëª¨ë¸ì´ ì˜ˆì¸¡í•˜ì§€ ëª»í•œ íŠ¹ìˆ˜í•œ ì¼€ì´ìŠ¤ë“¤

## 3. ì˜ˆì œ 2: í•­ê³µí¸ ìš´í•­ íŒ¨í„´ ë¶„ì„

### ì‹œê³„ì—´ ë°ì´í„° ìƒì„±

```r
# ì¼ë³„ í•­ê³µí¸ ìˆ˜ ì§‘ê³„
daily <- flights %>%
  mutate(date = make_date(year, month, day)) %>%
  group_by(date) %>%
  summarise(n = n())

# ì „ì²´ ì‹œê³„ì—´ ì‹œê°í™”
ggplot(daily, aes(date, n)) +
  geom_line()
```

![daily flights timeline](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_36_0.png)

### ìš”ì¼ íš¨ê³¼ ë¶„ì„

```r
# ìš”ì¼ ë³€ìˆ˜ ì¶”ê°€
daily <- daily %>%
  mutate(wday = wday(date, label = TRUE))

# ìš”ì¼ë³„ í•­ê³µí¸ ìˆ˜ ë¶„í¬
ggplot(daily, aes(wday, n)) +
  geom_boxplot()
```

![weekday effect](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_43_0.png)

#### ğŸ” ë¹„ì¦ˆë‹ˆìŠ¤ ì¸ì‚¬ì´íŠ¸
- **ì£¼ë§ íš¨ê³¼**: í† ìš”ì¼ê³¼ ì¼ìš”ì¼ì— í•­ê³µí¸ ìˆ˜ ê°ì†Œ
- **ì—…ë¬´ì¼ íŒ¨í„´**: ì›”-ê¸ˆìš”ì¼ì€ ë¹„êµì  ì¼ì •í•œ ìˆ˜ì¤€
- **í† ìš”ì¼ ìµœì €**: ê°€ì¡±ê³¼ì˜ ì‹œê°„ì„ ì„ í˜¸í•˜ëŠ” ë¬¸í™”

### ìš”ì¼ íš¨ê³¼ ì œê±° ëª¨ë¸

```r
# ìš”ì¼ ê¸°ë°˜ ëª¨ë¸
mod <- lm(n ~ wday, data = daily)

# ì˜ˆì¸¡ê°’ê³¼ ì›ë°ì´í„° ë¹„êµ
grid <- daily %>%
  data_grid(wday) %>%
  add_predictions(mod, "n")

ggplot(daily, aes(wday, n)) +
  geom_boxplot() +
  geom_point(data = grid, color = "red", size = 4)
```

![weekday model predictions](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_45_0.png)

### ì”ì°¨ë¥¼ í†µí•œ ìˆ¨ê²¨ì§„ íŒ¨í„´ ë°œê²¬

```r
# ì”ì°¨ ê³„ì‚° ë° ì‹œê³„ì—´ ë¶„ì„
daily <- daily %>%
  add_residuals(mod)

ggplot(daily, aes(date, resid)) +
  geom_ref_line(h = 0) +
  geom_line()
```

![residual time series](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_47_0.png)

#### ğŸ“ˆ ìƒˆë¡œìš´ íŒ¨í„´ ë°œê²¬
- **ê³„ì ˆì„±**: ì—¬ë¦„ ì¦ê°€, ê²¨ìš¸ ê°ì†Œ
- **íŠ¹ë³„ì¼ íš¨ê³¼**: íœ´ì¼ì— í•­ê³µí¸ ìˆ˜ ê¸‰ê°
- **ì¥ê¸° íŠ¸ë Œë“œ**: ì—°ì¤‘ ë³€í™” íŒ¨í„´

### ìš”ì¼ë³„ ì„¸ë¶€ ë¶„ì„

```r
# ìš”ì¼ë³„ ìƒ‰ê¹” êµ¬ë¶„ ì‹œê³„ì—´
ggplot(daily, aes(date, resid, color = wday)) +
  geom_ref_line(h = 0) +
  geom_line()
```

![weekday colored residuals](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_49_0.png)

#### ğŸ’¡ í† ìš”ì¼ íŠ¹ì´ì  ë°œê²¬
**í† ìš”ì¼ì˜ ê³„ì ˆì  ë³€í™”ê°€ ë‹¤ë¥¸ ìš”ì¼ê³¼ ë‹¤ë¦„**ì„ ë°œê²¬í–ˆìŠµë‹ˆë‹¤. ì—¬ë¦„ì—ëŠ” ì˜ˆì¸¡ë³´ë‹¤ ë§ê³ , ê°€ì„ì—ëŠ” ì ìŠµë‹ˆë‹¤.

### íŠ¹ë³„í•œ ë‚ ë“¤ ì‹ë³„

```r
# í° ìŒì˜ ì”ì°¨ë¥¼ ê°€ì§„ ë‚ ë“¤ (í•­ê³µí¸ ìˆ˜ ê¸‰ê°)
daily %>%
  filter(resid < -100)
#   date         n  wday     resid
# 1 2013-01-01  842   Tue  -109.4  # ì‹ ì •
# 2 2013-07-04  737   Thu  -228.8  # ë…ë¦½ê¸°ë…ì¼  
# 3 2013-11-28  634   Thu  -331.8  # ì¶”ìˆ˜ê°ì‚¬ì ˆ
# 4 2013-11-29  661   Fri  -306.5  # ì¶”ìˆ˜ê°ì‚¬ì ˆ ë‹¤ìŒë‚ 
# 5 2013-12-25  719   Wed  -243.7  # í¬ë¦¬ìŠ¤ë§ˆìŠ¤
```

### ì¥ê¸° íŠ¸ë Œë“œ ì‹œê°í™”

```r
# ë§¤ë„ëŸ¬ìš´ ì¶”ì„¸ì„  ì¶”ê°€
daily %>%
  ggplot(aes(date, resid)) +
  geom_ref_line(h = 0) +
  geom_line(color = "grey50") +
  geom_smooth(se = FALSE, span = 0.20)
```

![long term trend](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_53_1.png)

### í•™ê¸° íš¨ê³¼ ëª¨ë¸ë§

```r
# í•™ê¸° êµ¬ë¶„ í•¨ìˆ˜ ì •ì˜
term <- function(date){
  cut(date,
      breaks = ymd(20130101, 20130605, 20130825, 20140101),
      labels = c("spring", "summer", "fall")
  )
}

daily <- daily %>%
  mutate(term = term(date))

# í•™ê¸°ë³„ í† ìš”ì¼ íŒ¨í„´ í™•ì¸
daily %>%
  filter(wday == "Sat") %>%
  ggplot(aes(date, n, color = term)) +
  geom_point(alpha = 1/3) +
  geom_line() +
  scale_x_date(
    NULL,
    date_breaks = "1 month", 
    date_labels = "%b"
  )
```

![Saturday seasonal pattern](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_60_0.png)

### í•™ê¸°-ìš”ì¼ ìƒí˜¸ì‘ìš© ëª¨ë¸

```r
# í•™ê¸°ë³„ ìš”ì¼ íš¨ê³¼ ëª¨ë¸
ggplot(daily, aes(wday, n, color = term)) +
  geom_boxplot()
```

![term weekday interaction](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_62_0.png)

```r
# ìƒí˜¸ì‘ìš© ëª¨ë¸ êµ¬ì¶•
mod1 <- lm(n ~ wday, data = daily)              # ê¸°ë³¸ ëª¨ë¸
mod2 <- lm(n ~ wday * term, data = daily)       # ìƒí˜¸ì‘ìš© ëª¨ë¸

# ëª¨ë¸ ë¹„êµ
daily %>%
  gather_residuals(without_term = mod1, with_term = mod2) %>%
  ggplot(aes(date, resid, color = model)) +
  geom_line(alpha = 0.75)
```

![model comparison](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_65_0.png)

### ê°•ê±´í•œ íšŒê·€ ëª¨ë¸

```r
# ì´ìƒê°’ì— ê°•ê±´í•œ ëª¨ë¸ (MASS::rlm)
mod3 <- MASS::rlm(n ~ wday * term, data = daily)

daily %>%
  add_residuals(mod3, "resid") %>%
  ggplot(aes(date, resid)) +
  geom_hline(yintercept = 0, size = 2, color = "white") +
  geom_line()
```

![robust regression](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_69_0.png)

### ìŠ¤í”Œë¼ì¸ì„ ì‚¬ìš©í•œ ìœ ì—°í•œ ëª¨ë¸

```r
# ìì—° ìŠ¤í”Œë¼ì¸ì„ ì‚¬ìš©í•œ ì—°ì¤‘ íŒ¨í„´ ëª¨ë¸ë§
mod_spline <- MASS::rlm(n ~ wday * ns(date, 5), data = daily)

daily %>%
  data_grid(wday, date = seq_range(date, n = 13)) %>%
  add_predictions(mod_spline) %>%
  ggplot(aes(date, pred, color = wday)) +
  geom_line() +
  geom_point()
```

![spline model predictions](@/assets/images/2022-09-12_ëª¨ë¸ë§2_files/2022-09-12_ëª¨ë¸ë§2_80_0.png)

## 4. ëª¨ë¸ë§ ì „ëµê³¼ ì‹¤ë¬´ íŒ

### ğŸ”„ ë°˜ë³µì  ëª¨ë¸ë§ ì›Œí¬í”Œë¡œìš°

1. **íƒìƒ‰ì  ë¶„ì„**: ì‹œê°í™”ë¥¼ í†µí•œ íŒ¨í„´ ë°œê²¬
2. **ê¸°ë³¸ ëª¨ë¸**: ì£¼ìš” íš¨ê³¼ë¶€í„° ëª¨ë¸ë§
3. **ì”ì°¨ ë¶„ì„**: ë†“ì¹œ íŒ¨í„´ ì°¾ê¸°
4. **ëª¨ë¸ ê°œì„ **: ìƒˆë¡œìš´ ë³€ìˆ˜ë‚˜ ìƒí˜¸ì‘ìš© ì¶”ê°€
5. **ê²€ì¦**: ë„ë©”ì¸ ì§€ì‹ê³¼ ì¼ì¹˜ ì—¬ë¶€ í™•ì¸

### ğŸ“Š ë³€ìˆ˜ ë³€í™˜ ì „ëµ

| ìƒí™© | ë³€í™˜ ë°©ë²• | ëª©ì  |
|------|-----------|------|
| **ì¹˜ìš°ì¹œ ë¶„í¬** | ë¡œê·¸ ë³€í™˜ | ì •ê·œë¶„í¬ì— ê°€ê¹ê²Œ |
| **ê³¡ì„  ê´€ê³„** | ë‹¤í•­ì‹, ìŠ¤í”Œë¼ì¸ | ë¹„ì„ í˜• ê´€ê³„ í¬ì°© |
| **ì£¼ê¸°ì„±** | ì‚¼ê°í•¨ìˆ˜ | ê³„ì ˆì„±, ì£¼ê¸° íŒ¨í„´ |
| **ë²”ì£¼ í†µí•©** | íŒ©í„° ì¬ì½”ë”© | ì˜ë¯¸ ìˆëŠ” ê·¸ë£¹í™” |

### ğŸ¯ ëª¨ë¸ í•´ì„ ê°€ì´ë“œ

#### ë¡œê·¸ ë³€í™˜ëœ ëª¨ë¸ì—ì„œ
- **ê³„ìˆ˜ Î²**: log(y) ë‹¨ìœ„ë‹¹ ë³€í™”
- **exp(Î²)**: yì˜ ë°°ìˆ˜ ë³€í™”
- **100*(exp(Î²)-1)%**: í¼ì„¼íŠ¸ ë³€í™”

#### ì”ì°¨ ë¶„ì„ì—ì„œ
- **íŒ¨í„´ ì¡´ì¬**: ëª¨ë¸ì´ ë†“ì¹œ êµ¬ì¡°
- **ì´ë¶„ì‚°ì„±**: ë³€ìˆ˜ ë³€í™˜ í•„ìš”
- **ì´ìƒê°’**: íŠ¹ìˆ˜ ì¼€ì´ìŠ¤ë‚˜ ì˜¤ë¥˜

### âš ï¸ ì¼ë°˜ì ì¸ í•¨ì •ë“¤

1. **í˜¼ì¬ë³€ìˆ˜ ë¬´ì‹œ**: Simpson's Paradox
2. **ê³¼ì í•©**: ë„ˆë¬´ ë³µì¡í•œ ëª¨ë¸
3. **ì™¸ì‚½ì˜ ìœ„í—˜**: í›ˆë ¨ ë²”ìœ„ ë°– ì˜ˆì¸¡
4. **ì¸ê³¼ê´€ê³„ ì˜¤í•´**: ìƒê´€ê´€ê³„ â‰  ì¸ê³¼ê´€ê³„

## ğŸ’¡ ì‹¤ë¬´ í™œìš© íŒ

### âœ… ë³€ìˆ˜ ìƒì„± í•¨ìˆ˜í™”

```r
# ì¬ì‚¬ìš© ê°€ëŠ¥í•œ ë³€ìˆ˜ ìƒì„± í•¨ìˆ˜
compute_vars <- function(data){
  data %>%
    mutate(
      term = term(date),
      wday = wday(date, label = TRUE),
      month = month(date),
      is_holiday = date %in% holidays
    )
}
```

### ğŸ“ˆ ëª¨ë¸ ë¹„êµ ì²´í¬ë¦¬ìŠ¤íŠ¸

| ê¸°ì¤€ | ì¸¡ì • ë°©ë²• | ëª©í‘œ |
|------|-----------|------|
| **ì˜ˆì¸¡ ì„±ëŠ¥** | RMSE, RÂ² | ë‚®ì€ RMSE, ë†’ì€ RÂ² |
| **ë³µì¡ë„** | ë³€ìˆ˜ ìˆ˜, AIC | ë‹¨ìˆœí•¨ê³¼ ì„±ëŠ¥ì˜ ê· í˜• |
| **í•´ì„ì„±** | ê³„ìˆ˜ ìœ ì˜ì„± | ì˜ë¯¸ ìˆëŠ” ê´€ê³„ |
| **ì¼ë°˜í™”** | êµì°¨ê²€ì¦ | ìƒˆ ë°ì´í„° ì„±ëŠ¥ |

### ğŸ” ì§„ë‹¨ í•¨ìˆ˜ ì˜ˆì œ

```r
# ì¢…í•© ëª¨ë¸ ì§„ë‹¨ í•¨ìˆ˜
diagnose_model <- function(model, data) {
  residuals <- residuals(model)
  
  list(
    rmse = sqrt(mean(residuals^2)),
    r_squared = summary(model)$r.squared,
    shapiro_p = shapiro.test(residuals)$p.value,
    bp_test = car::ncvTest(model)$p  # ë“±ë¶„ì‚° ê²€ì •
  )
}
```

## ë§ˆë¬´ë¦¬

**ì‹¤ì „ ëª¨ë¸ë§**ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ **ë°ì´í„°ì™€ì˜ ëŒ€í™”**ì…ë‹ˆë‹¤. ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œ ë‹¤ë£¬ ë‘ ê°€ì§€ ì‚¬ë¡€ë¥¼ í†µí•´ ë‹¤ìŒì„ ë°°ìš¸ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤:

- **ë‹¤ì´ì•„ëª¬ë“œ ë¶„ì„**: í˜¼ì¬ë³€ìˆ˜ì˜ ì¤‘ìš”ì„±ê³¼ ë¡œê·¸ ë³€í™˜ì˜ íš¨ê³¼
- **í•­ê³µí¸ ë¶„ì„**: ì‹œê³„ì—´ íŒ¨í„´ê³¼ ë„ë©”ì¸ ì§€ì‹ ê²°í•©ì˜ í•„ìš”ì„±

### í•µì‹¬ êµí›ˆë“¤

1. **ì§ê´€ê³¼ ë‹¤ë¥¸ ê²°ê³¼**: í•­ìƒ í˜¼ì¬ë³€ìˆ˜ í™•ì¸
2. **ì‹œê°í™” ìš°ì„ **: íŒ¨í„´ì„ ëˆˆìœ¼ë¡œ ë¨¼ì € í™•ì¸
3. **ì”ì°¨ ë¶„ì„**: ëª¨ë¸ì´ ë†“ì¹œ ë¶€ë¶„ íƒìƒ‰
4. **ë„ë©”ì¸ ì§€ì‹**: í†µê³„ì™€ ì‹¤ë¬´ ì§€ì‹ì˜ ê²°í•©
5. **ë°˜ë³µì  ê°œì„ **: í•œ ë²ˆì— ì™„ë²½í•œ ëª¨ë¸ì€ ì—†ìŒ

**ì‹¤ë¬´ì—ì„œëŠ” ì™„ë²½í•œ ëª¨ë¸ë³´ë‹¤ ì´í•´í•˜ê¸° ì‰½ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ëª¨ë¸**ì´ ë” ê°€ì¹˜ ìˆìŠµë‹ˆë‹¤. ë³µì¡ì„±ê³¼ í•´ì„ ê°€ëŠ¥ì„± ì‚¬ì´ì˜ ê· í˜•ì„ ì°¾ì•„ê°€ë©°, ì§€ì†ì ìœ¼ë¡œ ëª¨ë¸ì„ ê°œì„ í•´ ë‚˜ê°€ëŠ” ê²ƒì´ ì„±ê³µì ì¸ ëª¨ë¸ë§ì˜ í•µì‹¬ì…ë‹ˆë‹¤!

ë‹¤ìŒ í¬ìŠ¤íŒ…ì—ì„œëŠ” **ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë²•ê³¼ ëª¨ë¸ ì„ íƒ ì „ëµ**ì— ëŒ€í•´ ë‹¤ë¤„ë³´ê² ìŠµë‹ˆë‹¤. ğŸ“Š