---
title: "factor"
format: 
  html:
    code-fold: false
    badges: true
author: 'ì¡°ìœ¤í˜¸'
date: '8/6/2022'
title-block-banner: true
jupyter: R
image: "rfordatascience.jpg"
categories: [R]
---
# factor

factor in ggplot, factor in tibble(fct_record, fct_collapse)


```R
library('tidyverse')
# í”Œë¡¯ ìµœì í™” ì„¤ì •
options(
  repr.plot.width = 8,
  repr.plot.height = 5,
  repr.plot.res = 150
)
theme_set(theme_minimal(base_size = 10))
```

## íŒ©í„°í˜•ì´ë€?

- íŒ©í„°í˜•ì€ ë²”ì£¼í˜• ë³€ìˆ˜ì— ì‚¬ìš©ë˜ëŠ”ë°, ë²”ì£¼í˜• ë³€ìˆ˜ë€ ê°€ì§ˆ ìˆ˜ ìˆëŠ” ê°’ì´ ë¯¸ë¦¬ ê³ ì •ë˜ê³  ë˜ ì•Œë ¤ì§„ ë³€ìˆ˜ë¥¼ ë§í•œë‹¤.<br>
íŒ©í„°í˜•ì€ ë¬¸ìí˜• ë²¡í„°ë¥¼ ì•ŒíŒŒë²³ìˆœì´ ì•„ë‹Œ ìˆœì„œë¡œ í‘œì‹œí•˜ê³  ì‹¶ì„ ë•Œë„ ì´ìš©í•  ìˆ˜ ìˆë‹¤.<br>
íŒ©í„°í˜•ì´ ë¬¸ìí˜•ë³´ë‹¤ ë‹¤ë£¨ê¸° ì‰½ê¸°ì—, ë² ì´ìŠ¤ Rì˜ í•¨ìˆ˜ë“¤ì€ ë¬¸ìí˜•ì„ ìë™ìœ¼ë¡œ íŒ©í„°í˜•ìœ¼ë¡œ ë³€í™˜í•œë‹¤.<br>
ë‹¤ì‹œ ë§í•´ íŒ©í„°í˜•ì´ ì‚¬ì‹¤ ë„ì›€ì´ ë˜ì§€ ì•ŠëŠ” ê²½ìš°ì—ë„ ë‚˜íƒ€ë‚˜ëŠ” ê²½ìš°ê°€ ë§ì´ ìˆë‹¤ëŠ” ì˜ë¯¸ë‹¤.

`-` ì›”ì„ ê¸°ë¡í•œ ë³€ìˆ˜ ì˜ˆì‹œ


```R
x1 <- c("Dec", "Apr", "Jan", "Mar")
```


```R
x1
```


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Dec'</li><li>'Apr'</li><li>'Jan'</li><li>'Mar'</li></ol>



`-` ë¬¸ìí˜•ì˜ ê²½ìš° ì˜¤íƒ€ë¥¼ ì…ë ¥í–ˆê±°ë‚˜ ì •ë ¬ì„ í•˜ê³ ì í•  ë•Œ ìœ ìš©í•œ ìˆœì„œë¡œ ì •ë ¬ì´ ë˜ì§€ ì•ŠëŠ”ë‹¤.


```R
sort(x1)
```


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Apr'</li><li>'Dec'</li><li>'Jan'</li><li>'Mar'</li></ol>



- íŒ©í„°í˜•ì„ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” ë¨¼ì € ì„ ë¡€(?)ë¥¼ ë§Œë“¤ì–´ ì£¼ì–´ì•¼ í•œë‹¤.


```R
month_levels <- c(
    "Jan", "Feb", "Mar", "Apr", "May", "Jun",
    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
    )
```


```R
month_levels
```


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'Jan'</li><li>'Feb'</li><li>'Mar'</li><li>'Apr'</li><li>'May'</li><li>'Jun'</li><li>'Jul'</li><li>'Aug'</li><li>'Sep'</li><li>'Oct'</li><li>'Nov'</li><li>'Dec'</li></ol>




```R
y1 <- factor(x1, levels = month_levels)
```


```R
y1
```


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>Dec</li><li>Apr</li><li>Jan</li><li>Mar</li></ol>

<details>
	<summary style=display:list-item;cursor:pointer>
		<strong>Levels</strong>:
	</summary>
	<style>
	.list-inline {list-style: none; margin:0; padding: 0}
	.list-inline>li {display: inline-block}
	.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
	</style>
	<ol class=list-inline><li>'Jan'</li><li>'Feb'</li><li>'Mar'</li><li>'Apr'</li><li>'May'</li><li>'Jun'</li><li>'Jul'</li><li>'Aug'</li><li>'Sep'</li><li>'Oct'</li><li>'Nov'</li><li>'Dec'</li></ol>
</details>


`-` ì„ ë¡€ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì •ë ¬


```R
sort(y1)
```


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>Jan</li><li>Mar</li><li>Apr</li><li>Dec</li></ol>

<details>
	<summary style=display:list-item;cursor:pointer>
		<strong>Levels</strong>:
	</summary>
	<style>
	.list-inline {list-style: none; margin:0; padding: 0}
	.list-inline>li {display: inline-block}
	.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
	</style>
	<ol class=list-inline><li>'Jan'</li><li>'Feb'</li><li>'Mar'</li><li>'Apr'</li><li>'May'</li><li>'Jun'</li><li>'Jul'</li><li>'Aug'</li><li>'Sep'</li><li>'Oct'</li><li>'Nov'</li><li>'Dec'</li></ol>
</details>


`-` ì˜¤íƒ€ê°€ ì¶”ê°€ëœ ì˜ˆì‹œ


```R
x2 <- c("Dec", "Apr", "Jam", "Mar")
```


```R
y2 <- factor(x2, levels = month_levels)
```

`-` ë ˆë²¨ ì§‘í•©(ì„ ë¡€)ì— í¬í•¨ë˜ì§€ ì•ŠëŠ” ê°’ì€ NAë¡œ ë³€í™˜ëœë‹¤.


```R
y2
```


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>Dec</li><li>Apr</li><li>&lt;NA&gt;</li><li>Mar</li></ol>

<details>
	<summary style=display:list-item;cursor:pointer>
		<strong>Levels</strong>:
	</summary>
	<style>
	.list-inline {list-style: none; margin:0; padding: 0}
	.list-inline>li {display: inline-block}
	.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
	</style>
	<ol class=list-inline><li>'Jan'</li><li>'Feb'</li><li>'Mar'</li><li>'Apr'</li><li>'May'</li><li>'Jun'</li><li>'Jul'</li><li>'Aug'</li><li>'Sep'</li><li>'Oct'</li><li>'Nov'</li><li>'Dec'</li></ol>
</details>


- `parse_factor`ì‚¬ìš©í•˜ë©´ NAê°€ ë‚˜ì˜¬ì‹œ warningëœ¬ë‹¤.


```R
y2 <- parse_factor(x2, levels = month_levels)
```

    Warning message:
    "1 parsing failure.
    row col           expected actual
      3  -- value in level set    Jam
    "


`-` `levels`ì…ë ¥ì•ˆí•˜ë©´ ê·¸ëƒ¥ ì•ŒíŒŒë²³ ìˆœì„œë¡œ ë‚˜ì—´


```R
factor(x1)
```


<style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>Dec</li><li>Apr</li><li>Jan</li><li>Mar</li></ol>

<details>
	<summary style=display:list-item;cursor:pointer>
		<strong>Levels</strong>:
	</summary>
	<style>
	.list-inline {list-style: none; margin:0; padding: 0}
	.list-inline>li {display: inline-block}
	.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
	</style>
	<ol class=list-inline><li>'Apr'</li><li>'Dec'</li><li>'Jan'</li><li>'Mar'</li></ol>
</details>


## factor in ggplot

`-` ì„¤ë¬¸ì¡°ì‚¬ ìƒ˜í”Œ ë°ì´í„°


```R
gss_cat %>% head
```


<table class="dataframe">
<caption>A tibble: 6 x 9</caption>
<thead>
	<tr><th scope=col>year</th><th scope=col>marital</th><th scope=col>age</th><th scope=col>race</th><th scope=col>rincome</th><th scope=col>partyid</th><th scope=col>relig</th><th scope=col>denom</th><th scope=col>tvhours</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>2000</td><td>Never married</td><td>26</td><td>White</td><td>$8000 to 9999 </td><td>Ind,near rep      </td><td>Protestant        </td><td>Southern baptist</td><td>12</td></tr>
	<tr><td>2000</td><td>Divorced     </td><td>48</td><td>White</td><td>$8000 to 9999 </td><td>Not str republican</td><td>Protestant        </td><td>Baptist-dk which</td><td>NA</td></tr>
	<tr><td>2000</td><td>Widowed      </td><td>67</td><td>White</td><td>Not applicable</td><td>Independent       </td><td>Protestant        </td><td>No denomination </td><td> 2</td></tr>
	<tr><td>2000</td><td>Never married</td><td>39</td><td>White</td><td>Not applicable</td><td>Ind,near rep      </td><td>Orthodox-christian</td><td>Not applicable  </td><td> 4</td></tr>
	<tr><td>2000</td><td>Divorced     </td><td>25</td><td>White</td><td>Not applicable</td><td>Not str democrat  </td><td>None              </td><td>Not applicable  </td><td> 1</td></tr>
	<tr><td>2000</td><td>Married      </td><td>25</td><td>White</td><td>$20000 - 24999</td><td>Strong democrat   </td><td>Protestant        </td><td>Southern baptist</td><td>NA</td></tr>
</tbody>
</table>



íŒ©í„°í˜•ì´ í‹°ë¸”ë¡œ ì €ì¥ë˜ë©´ í•´ë‹¹í•˜ëŠ” ë ˆë²¨ë“¤ì„ ì‰½ê²Œ ë³¼ ìˆ˜ ì—†ëŠ”ë° ë³¼ ìˆ˜ ìˆëŠ” ë°©ë²•1)ì€ `count`ì´ë‹¤.


```R
gss_cat %>%
count(race)
```


<table class="dataframe">
<caption>A tibble: 3 x 2</caption>
<thead>
	<tr><th scope=col>race</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Other</td><td> 1959</td></tr>
	<tr><td>Black</td><td> 3129</td></tr>
	<tr><td>White</td><td>16395</td></tr>
</tbody>
</table>



ë°©ë²•2) ë§‰ëŒ€ ê·¸ë˜í”„


```R
ggplot(gss_cat, aes(race)) + geom_bar()
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_32_0.png)
    


`scale_x_discrete(drop = FALSE)` : ggplotì—ì„œ ê°’ì´ ì—†ëŠ” ë ˆë²¨ì„ ë³´ì´ê²Œí•˜ê¸°


```R
ggplot(gss_cat, aes(race)) +
geom_bar() +
scale_x_discrete(drop = FALSE)
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_34_0.png)
    


ìœ íš¨í•˜ì§€ë§Œ ì´ ë°ì´í„° ì…‹ì—ì„œ ë‚˜íƒ€ë‚˜ì§€ ì•ŠëŠ” ê°’ì„ ë‚˜íƒ€ëƒ„

`-` ì¢…êµì— ë”°ë¥¸ í•˜ë£¨ TV ì‹œì²­ì‹œê°„ì˜ í‰ê· 


```R
relig_summary <- gss_cat %>%
group_by(relig) %>%
summarize(
    age = mean(age, na.rm = TRUE),
    tvhours = mean(tvhours, na.rm = TRUE),
    n = n()
    )

ggplot(relig_summary, aes(tvhours, relig)) + geom_point()
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_37_0.png)
    


`-` tvhoursìˆœìœ„ë¡œ religionìˆœìœ„ ì¬ ì •ë ¬


```R
ggplot(relig_summary, aes(tvhours, fct_reorder(relig, tvhours))) + geom_point()
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_39_0.png)
    


`-` tibbleìì²´ë¥¼ ìˆœì„œ ì •ë ¬ì‹œí‚¤ê³  ê·¸ë¦¬ëŠ” ë°©ë²•


```R
relig_summary %>%
mutate(relig = fct_reorder(relig, tvhours)) %>%
ggplot(aes(tvhours, relig)) +
geom_point()
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_41_0.png)
    


`-` ë³´ê³ ì„œ ì†Œë“ ë ˆë²¨ì— ë”°ë¼ í‰ê· ë‚˜ì´ê°€ ì–´ë–»ê²Œ ë³€í™”í•˜ëŠ”ì§€ ë³´ì—¬ì£¼ëŠ” plot


```R
rincome_summary <- gss_cat %>%
group_by(rincome) %>%
summarize(
    age = mean(age, na.rm = TRUE),
    tvhours = mean(tvhours, na.rm = TRUE),
    n = n()
    )
```


```R
rincome_summary
```


<table class="dataframe">
<caption>A tibble: 16 x 4</caption>
<thead>
	<tr><th scope=col>rincome</th><th scope=col>age</th><th scope=col>tvhours</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>No answer     </td><td>45.45029</td><td>2.904762</td><td> 183</td></tr>
	<tr><td>Don't know    </td><td>45.60902</td><td>3.411290</td><td> 267</td></tr>
	<tr><td>Refused       </td><td>47.61082</td><td>2.481973</td><td> 975</td></tr>
	<tr><td>$25000 or more</td><td>44.21217</td><td>2.234208</td><td>7363</td></tr>
	<tr><td>$20000 - 24999</td><td>41.53365</td><td>2.784753</td><td>1283</td></tr>
	<tr><td>$15000 - 19999</td><td>39.96180</td><td>2.912245</td><td>1048</td></tr>
	<tr><td>$10000 - 14999</td><td>41.11301</td><td>3.016541</td><td>1168</td></tr>
	<tr><td>$8000 to 9999 </td><td>41.08235</td><td>3.148571</td><td> 340</td></tr>
	<tr><td>$7000 to 7999 </td><td>38.24468</td><td>2.645455</td><td> 188</td></tr>
	<tr><td>$6000 to 6999 </td><td>40.29907</td><td>3.174312</td><td> 215</td></tr>
	<tr><td>$5000 to 5999 </td><td>37.81057</td><td>3.163793</td><td> 227</td></tr>
	<tr><td>$4000 to 4999 </td><td>38.87500</td><td>3.145299</td><td> 226</td></tr>
	<tr><td>$3000 to 3999 </td><td>37.82182</td><td>3.312102</td><td> 276</td></tr>
	<tr><td>$1000 to 2999 </td><td>34.54430</td><td>3.004525</td><td> 395</td></tr>
	<tr><td>Lt $1000      </td><td>40.51049</td><td>3.361842</td><td> 286</td></tr>
	<tr><td>Not applicable</td><td>56.10628</td><td>3.791468</td><td>7043</td></tr>
</tbody>
</table>




```R
ggplot(rincome_summary, aes(age, fct_reorder(rincome, age))) + geom_point()
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_45_0.png)
    


`-` í•´ë‹¹ì—†ìŒ(Not applicable)ì„ ë‹¤ë¥¸ íŠ¹ë³„í•œ ë ˆë²¨ë“¤ê³¼ í•¨ê»˜ ì•ìœ¼ë¡œ ê°€ì ¸ì˜¤ê¸°


```R
ggplot(rincome_summary, aes(age, fct_relevel(rincome, "Not applicable"))) +
geom_point()
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_47_0.png)
    



```R
by_age <- gss_cat %>%
filter(!is.na(age)) %>%
count(age, marital) %>%
group_by(age) %>%
mutate(prop = n / sum(n))
```


```R
by_age %>% head
```


<table class="dataframe">
<caption>A grouped_df: 6 x 4</caption>
<thead>
	<tr><th scope=col>age</th><th scope=col>marital</th><th scope=col>n</th><th scope=col>prop</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>18</td><td>Never married</td><td> 89</td><td>0.978021978</td></tr>
	<tr><td>18</td><td>Married      </td><td>  2</td><td>0.021978022</td></tr>
	<tr><td>19</td><td>Never married</td><td>234</td><td>0.939759036</td></tr>
	<tr><td>19</td><td>Divorced     </td><td>  3</td><td>0.012048193</td></tr>
	<tr><td>19</td><td>Widowed      </td><td>  1</td><td>0.004016064</td></tr>
	<tr><td>19</td><td>Married      </td><td> 11</td><td>0.044176707</td></tr>
</tbody>
</table>




```R
ggplot(by_age, aes(age, prop, color = marital)) +
geom_line(na.rm = TRUE)
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_50_0.png)
    


`fct_reorder2` : ê°€ì¥ í° xê°’ê³¼ ì—°ê´€ëœ yê°’ìœ¼ë¡œ íŒ©í„°í˜•ì„ ì¬ì •ë ¬í•œë‹¤.<br>
ì„  ìƒ‰ìƒì€ ë²”ë¡€ì™€ ì •ë ¬ë˜ë¯€ë¡œ ì´ë ‡ê²Œ í•˜ë©´ plotì½ê¸°ê°€ ì‰¬ì›Œì§„ë‹¤.


```R
ggplot(by_age, aes(age, prop, color = fct_reorder2(marital, age, prop))) +
geom_line() +
labs(color = "marital")
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_52_0.png)
    


`fct_infreq` : ë¹ˆë„ ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ë ˆë²¨ ì •ë ¬


```R
gss_cat %>%
mutate(marital = marital %>% fct_infreq() %>% fct_rev()) %>%
ggplot(aes(marital)) +
geom_bar()
```


    
![png](2022-08-06_factor_files/2022-08-06_factor_54_0.png)
    


## tibbleì† factorê°’ ìˆ˜ì •


```R
gss_cat %>% count(partyid)
```


<table class="dataframe">
<caption>A tibble: 10 x 2</caption>
<thead>
	<tr><th scope=col>partyid</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>No answer         </td><td> 154</td></tr>
	<tr><td>Don't know        </td><td>   1</td></tr>
	<tr><td>Other party       </td><td> 393</td></tr>
	<tr><td>Strong republican </td><td>2314</td></tr>
	<tr><td>Not str republican</td><td>3032</td></tr>
	<tr><td>Ind,near rep      </td><td>1791</td></tr>
	<tr><td>Independent       </td><td>4119</td></tr>
	<tr><td>Ind,near dem      </td><td>2499</td></tr>
	<tr><td>Not str democrat  </td><td>3690</td></tr>
	<tr><td>Strong democrat   </td><td>3490</td></tr>
</tbody>
</table>



`fct_recode` : ë¯¸ë¦¬ ì…ë ¥í•œ ëŒ€ë¡œ íŒ©í„° ê°’ì„ ë°”ê¿”ì¤€ë‹¤(ëª…ì‹œì ìœ¼ë¡œ ì–¸ê¸‰í•˜ì§€ ì•Šì€ ê²ƒì€ ê·¸ëŒ€ë¡œ ë‘ )


```R
gss_cat %>%
mutate(partyid = fct_recode(partyid,
                            "Repubican, strong"     = "Strong republican",
                            "Repubican, weak"       = "Not str republican",
                            "Independent, near rep" = "Ind,near rep",
                            "Independent, near dem" = "Ind,near dem",
                            "Democrat, weak"        = "Not str democrat",
                            "Democrat, strong"      = "Strong democrat"
                            )) %>%
count(partyid)
```


<table class="dataframe">
<caption>A tibble: 10 x 2</caption>
<thead>
	<tr><th scope=col>partyid</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>No answer            </td><td> 154</td></tr>
	<tr><td>Don't know           </td><td>   1</td></tr>
	<tr><td>Other party          </td><td> 393</td></tr>
	<tr><td>Repubican, strong    </td><td>2314</td></tr>
	<tr><td>Repubican, weak      </td><td>3032</td></tr>
	<tr><td>Independent, near rep</td><td>1791</td></tr>
	<tr><td>Independent          </td><td>4119</td></tr>
	<tr><td>Independent, near dem</td><td>2499</td></tr>
	<tr><td>Democrat, weak       </td><td>3690</td></tr>
	<tr><td>Democrat, strong     </td><td>3490</td></tr>
</tbody>
</table>



- ë‚˜ë¨¸ì§€(No answer)ë“±ì„ Otherë¡œ ë¬¶ì–´ì„œ ì²˜ë¦¬í•´ë²„ë¦¬ê¸°


```R
gss_cat %>%
mutate(partyid = fct_recode(partyid,
                            "Repubican, strong"     = "Strong republican",
                            "Repubican, weak"       = "Not str republican",
                            "Independent, near rep" = "Ind,near rep",
                            "Independent, near dem" = "Ind,near dem",
                            "Democrat, weak"        = "Not str democrat",
                            "Democrat, strong"      = "Strong democrat",
                            "Other"                 = "No answer",
                            "Other"                 = "Don't know",
                            "Other"                 = "Other party"
                            )) %>%
count(partyid)
```


<table class="dataframe">
<caption>A tibble: 8 x 2</caption>
<thead>
	<tr><th scope=col>partyid</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Other                </td><td> 548</td></tr>
	<tr><td>Repubican, strong    </td><td>2314</td></tr>
	<tr><td>Repubican, weak      </td><td>3032</td></tr>
	<tr><td>Independent, near rep</td><td>1791</td></tr>
	<tr><td>Independent          </td><td>4119</td></tr>
	<tr><td>Independent, near dem</td><td>2499</td></tr>
	<tr><td>Democrat, weak       </td><td>3690</td></tr>
	<tr><td>Democrat, strong     </td><td>3490</td></tr>
</tbody>
</table>



âœ–ï¸ ì„œë¡œ ê°™ì§€ ì•Šì€ ë²”ì£¼ë“¤ì„ í•¨ê»˜ ë¬¶ëŠ”ë‹¤ë©´ ì˜ëª»ëœ ê²°ê³¼ë¥¼ ë„ì¶œí•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì‹ ì¤‘íˆ ì‚¬ìš©í•´ì•¼ í•œë‹¤.

`fct_collapse` : `fct_recode`ì™€ ë¹„ìŠ·í•œë° ë‹¤ìˆ˜ë¥¼ í•˜ë‚˜ë¡œ ë³‘í•©í•˜ê³ ì í•  ë•Œ ë” í¸í•¨


```R
gss_cat %>%
mutate(partyid = fct_collapse(partyid,
                              other = c("No answer", "Don't know", "Other party"),
                              rep = c("Strong republican", "Not str republican"),
                              ind = c("Ind,near rep", "Independent", "Ind,near dem"),
                              dem = c("Not str democrat", "Strong democrat")
                              )) %>% 
count(partyid)
```


<table class="dataframe">
<caption>A tibble: 4 x 2</caption>
<thead>
	<tr><th scope=col>partyid</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>other</td><td> 548</td></tr>
	<tr><td>rep  </td><td>5346</td></tr>
	<tr><td>ind  </td><td>8409</td></tr>
	<tr><td>dem  </td><td>7180</td></tr>
</tbody>
</table>



`-` ìƒìœ„ 1ë“±ê³¼ ë‚˜ë¨¸ì§€ëŠ” Otherë¡œ ë¬¶ì–´ì„œ ë¹„êµí•˜ê¸°


```R
gss_cat %>%
mutate(relig = fct_lump(relig)) %>%
count(relig)
```


<table class="dataframe">
<caption>A tibble: 2 x 2</caption>
<thead>
	<tr><th scope=col>relig</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Protestant</td><td>10846</td></tr>
	<tr><td>Other     </td><td>10637</td></tr>
</tbody>
</table>



`-` ìƒìœ„ 4ë“±ê¹Œì§€ë§Œ ë³´ê³  ë‚˜ë¨¸ì§€ë“¤ì€ ì „ë¶€ Otherë¡œ ë¬¶ê¸°


```R
gss_cat  %>% mutate(relig = fct_lump(relig, n = 4)) %>%
count(relig, sort = TRUE) %>%
print(n = Inf)
```

    [90m# A tibble: 5 x 2[39m
      relig          n
      [3m[90m<fct>[39m[23m      [3m[90m<int>[39m[23m
    [90m1[39m Protestant [4m1[24m[4m0[24m846
    [90m2[39m Catholic    [4m5[24m124
    [90m3[39m None        [4m3[24m523
    [90m4[39m Other       [4m1[24m301
    [90m5[39m Christian    689

